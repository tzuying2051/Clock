<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>極致精準對時鐘</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@500;700&family=Noto+Serif+TC:wght@700&family=JetBrains+Mono:wght@700&family=Playfair+Display:wght@700&family=Montserrat:wght@700&family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --bg-color: #000000; --text-color: #ffffff; --panel-bg: rgba(28, 28, 30, 0.85); --input-bg: rgba(255, 255, 255, 0.12); }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: var(--bg-color); color: var(--text-color); display: flex; justify-content: center; align-items: center; font-family: 'JetBrains Mono', monospace; transition: background 0.3s; }
        #clock { font-weight: 700; font-variant-numeric: tabular-nums; line-height: 1; white-space: nowrap; user-select: none; z-index: 1; pointer-events: none; }
        #controls { position: fixed; bottom: 30px; left: 50%; transform: translate(-50%, 150%); background: var(--panel-bg); padding: 20px; border-radius: 32px; display: flex; flex-direction: row; gap: 20px; backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px); opacity: 0; visibility: hidden; transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.3s; z-index: 100; border: 1px solid rgba(255, 255, 255, 0.15); width: auto; max-width: 95vw; box-shadow: 0 20px 50px rgba(0,0,0,0.5); overflow-x: auto; }
        body.show-ui #controls { opacity: 1; visibility: visible; transform: translate(-50%, 0); }
        .col { display: flex; flex-direction: column; gap: 10px; min-width: 150px; flex-shrink: 0; }
        .group { display: flex; flex-direction: column; align-items: center; gap: 5px; width: 100%; }
        .label { font-size: 10px; color: rgba(255,255,255,0.4); text-transform: uppercase; letter-spacing: 1px; }
        .box { display: flex; flex-direction: column; align-items: center; gap: 6px; background: var(--input-bg); padding: 10px; border-radius: 18px; width: 100%; box-sizing: border-box; }
        .row { display: flex; align-items: center; gap: 6px; width: 100%; justify-content: center; }
        input[type="number"], input[type="text"], select { background: rgba(255,255,255,0.1); border: none; color: #fff; font-size: 11px; text-align: center; padding: 4px; border-radius: 6px; font-family: inherit; outline: none; }
        .btn-adj { background: rgba(255,255,255,0.15); height: 30px; border-radius: 8px; font-weight: bold; cursor: pointer; color: white; border: none; font-size: 11px; flex: 1; }
        .btn-adj:active { background: rgba(255,255,255,0.3); }
        .btn-icon { width: 42px; height: 42px; border-radius: 50%; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); transition: 0.2s; }
        .btn-icon:hover { background: rgba(255,255,255,0.2); }
        input[type="range"] { width: 100%; accent-color: #fff; cursor: pointer; }
        input[type="color"] { width: 24px; height: 24px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.2); padding: 0; cursor: pointer; }
        @media (max-width: 900px) { #controls { padding: 15px; gap: 12px; } .col { min-width: 130px; } }
    </style>
</head>
<body onclick="handleBodyClick(event)">

    <div id="clock">00:00:00</div>

    <div id="controls">
        <div class="col">
            <div class="row" style="margin-bottom: 5px;">
                <div class="btn-icon" onclick="location.reload();"><svg width="18" height="18" fill="white" viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg></div>
                <div class="btn-icon" onclick="toggleFullScreen();"><svg width="18" height="18" fill="white" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg></div>
            </div>
            <div class="group">
                <span class="label">時間微調 / Offset</span>
                <div class="box" onclick="event.stopPropagation()">
                    <div class="row">
                        <button class="btn-adj" onclick="adj(100)">+0.1s</button>
                        <button class="btn-adj" onclick="adj(-100)">-0.1s</button>
                    </div>
                    <div id="offVal" style="color:#30d158; font-weight:bold; font-size:13px;">+0.0s</div>
                    <button onclick="adj(0,true)" style="font-size:9px; opacity:0.5; text-decoration:underline; color:white; border:none; background:none; cursor:pointer;">重設歸零</button>
                </div>
            </div>
        </div>

        <div class="col" style="min-width: 170px;">
            <div class="group">
                <span class="label">時間格式與字體</span>
                <div class="box">
                    <select id="hMode" style="width:100%;" onchange="resetTimer()">
                        <option value="24">24 小時制 (24H)</option>
                        <option value="12">12 小時制 (12H)</option>
                    </select>
                    <select id="fFam" style="width:100%; margin-top:5px;" onchange="updateF(this.value)">
                        <option value="'JetBrains Mono'">JetBrains Mono</option>
                        <option value="'Noto Sans TC'">思源黑體</option>
                        <option value="'Noto Serif TC'">思源宋體</option>
                        <option value="'Montserrat'">Montserrat</option>
                        <option value="'Roboto Mono'">Roboto Mono</option>
                        <option value="'Playfair Display'">Playfair Display</option>
                    </select>
                </div>
            </div>
            <div class="group">
                <span class="label">時區選單</span>
                <div class="box">
                    <select id="tZone" style="width:100%;" onchange="resetTimer()">
                        <option value="local">本地時間 Local</option>
                        <option value="Asia/Taipei">台北 Taipei (GMT+8)</option>
                        <option value="Asia/Shanghai">北京 Beijing (GMT+8)</option>
                        <option value="Asia/Hong_Kong">香港 Hong Kong (GMT+8)</option>
                        <option value="Asia/Tokyo">東京 Tokyo (GMT+9)</option>
                        <option value="Asia/Seoul">首爾 Seoul (GMT+9)</option>
                        <option value="Europe/London">倫敦 London (GMT+0)</option>
                        <option value="Europe/Paris">巴黎 Paris (GMT+1)</option>
                        <option value="America/New_York">紐約 New York (GMT-5)</option>
                        <option value="America/Los_Angeles">洛杉磯 L.A. (GMT-8)</option>
                        <option value="Australia/Sydney">雪梨 Sydney (GMT+11)</option>
                        <option value="Pacific/Auckland">奧克蘭 Auckland (GMT+13)</option>
                        <option value="Asia/Dubai">杜拜 Dubai (GMT+4)</option>
                        <option value="UTC">標準時間 UTC (GMT+0)</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="col">
            <div class="group">
                <span class="label">字體大小 / Size</span>
                <div class="box" onclick="event.stopPropagation()">
                    <input type="range" id="sSli" min="5" max="80" value="18" oninput="sSync(this.value)">
                    <input type="number" id="sNum" value="18" onchange="sSync(this.value)" style="width:50px;">
                </div>
            </div>
            <div class="group">
                <span class="label">字體間距 / Spacing</span>
                <div class="box" onclick="event.stopPropagation()">
                    <input type="range" id="spSli" min="-10" max="50" value="0" oninput="spSync(this.value)">
                    <input type="number" id="spNum" value="0" onchange="spSync(this.value)" style="width:50px;">
                </div>
            </div>
        </div>

        <div class="col">
            <div class="group">
                <span class="label">顏色設定 (背景/文字)</span>
                <div class="box" onclick="event.stopPropagation()">
                    <div class="row">
                        <input type="color" id="bgC" value="#000000" oninput="cSync('bg',this.value)">
                        <input type="text" id="bgH" value="#000000" onchange="cSync('bg',this.value)" style="width:65px;">
                    </div>
                    <div class="row" style="margin-top:5px;">
                        <input type="color" id="txC" value="#FFFFFF" oninput="cSync('tx',this.value)">
                        <input type="text" id="txH" value="#FFFFFF" onchange="cSync('tx',this.value)" style="width:65px;">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let offset = 0, uiT;
        const clock = document.getElementById('clock'), controls = document.getElementById('controls');

        function update() {
            const now = new Date(Date.now() + offset);
            const mode = document.getElementById('hMode').value;
            const tz = document.getElementById('tZone').value;
            const opt = { hour:'2-digit', minute:'2-digit', second:'2-digit', hour12: mode==='12' };
            if(tz !== 'local') opt.timeZone = tz;
            clock.textContent = now.toLocaleTimeString('en-GB', opt).replace(/[APM]/g, '').trim();
        }

        function adj(ms, reset=false) {
            offset = reset ? 0 : offset + ms;
            const s = (offset/1000).toFixed(1);
            document.getElementById('offVal').textContent = (s>=0?"+":"")+s+"s";
            resetTimer();
        }

        function sSync(v) {
            document.getElementById('sSli').value = v; document.getElementById('sNum').value = v;
            clock.style.fontSize = (window.innerWidth > window.innerHeight) ? (v*1.8)+'vh' : v+'vw';
            resetTimer();
        }

        function spSync(v) {
            document.getElementById('spSli').value = v; document.getElementById('spNum').value = v;
            clock.style.letterSpacing = v+'px'; resetTimer();
        }

        function cSync(t, v) {
            if(!v.startsWith('#')) v = '#'+v;
            if(t==='bg') { document.documentElement.style.setProperty('--bg-color', v); document.getElementById('bgC').value = v; document.getElementById('bgH').value = v.toUpperCase(); }
            else { document.documentElement.style.setProperty('--text-color', v); document.getElementById('txC').value = v; document.getElementById('txH').value = v.toUpperCase(); }
            resetTimer();
        }

        function updateF(v) { clock.style.fontFamily = v; resetTimer(); }

        function handleBodyClick(e) { if(!controls.contains(e.target)) { document.body.classList.toggle('show-ui'); if(document.body.classList.contains('show-ui')) resetTimer(); } }

        function resetTimer() { clearTimeout(uiT); uiT = setTimeout(() => { if(!document.activeElement.tagName.match(/INPUT|SELECT/)) document.body.classList.remove('show-ui'); }, 5000); }

        function toggleFullScreen() {
            if (!document.fullscreenElement) document.documentElement.requestFullscreen();
            else document.exitFullscreen();
        }

        setInterval(update, 100);
        sSync(18);
    </script>
</body>
</html>
